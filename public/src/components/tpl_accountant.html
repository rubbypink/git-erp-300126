<template id="tmpl-dashboard">
    <div class="acc-wrapper container-fluid p-0">
        <div class="acc-header d-flex justify-content-between align-items-center px-3 py-2  shadow-sm">
            <div class="d-flex align-items-center">
                <i class="fas fa-wallet text-primary fs-4 me-2"></i>
                <h5 class="m-0 fw-bold text-dark">K·∫ø To√°n</h5>
            </div>

            <div class="acc-entity-selector">
                <select id="acc-entity-select"
                    class="form-select form-select-sm fw-bold border-0 bg-light text-primary">
                    <option value="9trip">üè¢ 9 Trip ERP</option>
                    <option value="thenice">üè® The Nice Hotel</option>
                </select>
            </div>
        </div>

        <div class="p-3">
            <div class="row g-3 justify-content-center">
                <div class="col-12 col-lg-4">
                    <div class="acc-card h-100 border-start border-4 border-primary">
                        <div class="acc-card-header d-flex justify-content-between align-items-center mb-2">
                            <span class="text-uppercase text-dark small fw-bold"><i
                                    class="fas fa-landmark me-1"></i>T·ªïng
                                Qu·ªπ Th·ª±c T·∫ø</span>
                            <span class="fs-5 fw-bold text-primary" id="d-total-fund">0</span>
                        </div>
                        <div id="acc-fund-list-container" class="acc-fund-list">
                            <div class="text-center text-muted small fst-italic py-2">ƒêang t·∫£i d·ªØ li·ªáu qu·ªπ...</div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-lg-4">
                    <div class="acc-card h-100 border-start border-4 border-success">
                        <div class="acc-card-header d-flex justify-content-between align-items-center mb-2">
                            <span class="text-uppercase text-dark small fw-bold"><i
                                    class="fas fa-chart-line me-1"></i>L√£i/L·ªó (Net)</span>
                            <span class="fs-5 fw-bold text-success" id="d-net-balance">0</span>
                        </div>
                        <div class="row text-center mt-3">
                            <div class="col-6 border-end">
                                <div class="small text-muted mb-1">T·ªïng Thu (IN)</div>
                                <div class="fw-bold text-success" id="d-total-in">0</div>
                            </div>
                            <div class="col-6">
                                <div class="small text-muted mb-1">T·ªïng Chi (OUT)</div>
                                <div class="fw-bold text-danger" id="d-total-out">0</div>
                            </div>
                        </div>
                        <div class="mt-2 text-end">
                            <small class="text-muted fst-italic" style="font-size: 0.75rem;">*Theo b·ªô l·ªçc hi·ªÉn
                                th·ªã</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="px-3 mb-3">
            <div class="acc-filter-container" style="width: 100%; justify-self: start;">
                <div class="acc-filter-header bg-light" onclick="this.parentElement.classList.toggle('active')"
                    style="pointer-events: auto;">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-filter text-primary me-2"></i>
                        <span class="fw-bold text-dark me-1">L·ªçc:</span>
                        <span id="acc-filter-summary" class="text-primary fw-bold">Th√°ng n√†y</span>
                    </div>
                    <i class="fas fa-chevron-down text-muted transition-icon"></i>
                </div>

                <div class="acc-filter-body">
                    <div class="mb-3">
                        <label class="acc-label">Giai ƒëo·∫°n</label>
                        <div class="d-flex gap-2 flex-wrap">
                            <select id="acc-filter-period" class="form-select form-select-sm flex-grow-1">
                                <option value="today">H√¥m nay</option>
                                <option value="week">Tu·∫ßn n√†y</option>
                                <option value="month" selected>Th√°ng n√†y</option>
                                <option value="quarter">Qu√Ω n√†y</option>
                                <option value="year">NƒÉm nay</option>
                                <option value="all">T·∫•t c·∫£</option>
                                <option value="custom">T√πy ch·ªçn ng√†y...</option>
                            </select>
                        </div>
                        <div id="acc-custom-date-row" class="row g-2 mt-2 d-none">
                            <div class="col-6">
                                <label class="acc-label-xs">T·ª´ ng√†y</label>
                                <input type="date" id="acc-filter-start" class="form-control form-control-sm">
                            </div>
                            <div class="col-6">
                                <label class="acc-label-xs">ƒê·∫øn ng√†y</label>
                                <input type="date" id="acc-filter-end" class="form-control form-control-sm">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="acc-label">T√¨m chi ti·∫øt</label>
                        <div class="input-group input-group-sm">
                            <select id="acc-filter-field" class="form-select" style="max-width: 35%;">
                                <option value="all">T·∫•t c·∫£</option>
                            </select>
                            <input type="text" id="acc-filter-value" class="form-control" placeholder="Nh·∫≠p t·ª´ kh√≥a...">
                        </div>
                    </div>

                    <div class="text-end">
                        <button class="btn btn-sm btn-primary w-100" id="btn-apply-filter" onclick="">
                            <i class="fas fa-check me-1"></i> √Åp d·ª•ng b·ªô l·ªçc
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="px-3 pb-5 mb-5">
            <div class="table-responsive rounded shadow-sm acc-table-wrapper" style="font-size: 0.8rem;">
                <table class="table table-striped table-hover align-middle mb-0 text-nowrap text-center"
                    id="acc-transaction-table">
                    <thead class="table-secondary sticky-top">
                        <tr>
                            <th width="90px" class="ps-3"><i class="fas fa-barcode me-1"></i>ID GD</th>
                            <th width="70px" class="text-center">Lo·∫°i</th>
                            <th width="95px" class="text-center">Ng√†y CT</th>
                            <th class="text-end">S·ªë ti·ªÅn</th>
                            <th style="min-width: 180px;">Di·ªÖn gi·∫£i</th>
                            <th width="120px">H·∫°ng m·ª•c</th>
                            <th width="110px">Booking ID</th>
                            <th width="80px">Qu·ªπ</th>
                            <th width="110px">Tr·∫°ng th√°i</th>
                            <th width="100px">Ng∆∞·ªùi t·∫°o</th>
                            <th width="95px">Ng√†y t·∫°o</th>
                            <th width="40px"></th>
                        </tr>
                    </thead>
                    <tbody id="acc-table-body">
                    </tbody>
                </table>
            </div>
            <div class="text-center mt-3 text-muted small">
                Hi·ªÉn th·ªã <span id="acc-showing-count" class="fw-bold">0</span> giao d·ªãch
            </div>
        </div>

        <div class="d-none">
            <select id="tpl-fund-select-options">
            </select>
        </div>
    </div>
</template>
<template id="tmpl-acc-footer-bar">
    <div class="acc-action-bar" id="acc-footer-bar">
        <div class="acc-global-search-wrapper">
            <i class="fas fa-search text-muted search-icon"></i>
            <input type="text" id="acc-global-search" class="form-control form-control-sm ps-5 rounded-pill"
                placeholder="T√¨m tr√™n trang...">
        </div>

        <div class="d-flex gap-2">
            <button class="btn btn-light text-primary btn-icon-only rounded-circle" id="acc-btn-sync-sales"
                title="Update" onclick="window.AccountantCtrl?.init()">
                <i class="fas fa-sync-alt"></i>
            </button>

            <button class="btn btn-light text-secondary btn-icon-only rounded-circle" id="acc-btn-report"
                title="B√°o c√°o" onclick="window.AccountantCtrl?.openReportModal()">
                <i class="fas fa-file-invoice"></i>
            </button>

            <div class="btn-group dropup">
                <button type="button" class="btn btn-primary rounded-pill px-3 fw-bold shadow-sm"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-plus me-1"></i> T·∫°o
                </button>
                <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 p-2 rounded-3 mb-2">
                    <li><button class="dropdown-item rounded-2 text-success py-2 fw-bold" id="acc-btn-add-in"
                            onclick="window.AccountantCtrl.openTransactionModal('IN')">
                            <i class="fas fa-arrow-down me-2"></i> Phi·∫øu Thu (IN)
                        </button></li>
                    <li><button class="dropdown-item rounded-2 text-danger py-2 fw-bold" id="acc-btn-add-out"
                            onclick="window.AccountantCtrl.openTransactionModal('OUT')">
                            <i class="fas fa-arrow-up me-2"></i> Phi·∫øu Chi (OUT)
                        </button></li>
                </ul>
            </div>
        </div>
    </div>
</template>
<template id="tmpl-report">
    <!-- Report Modal Content -->
    <div class="acc-report-wrapper container-fluid p-0">
        <div
            class="acc-report-header d-flex justify-content-between align-items-center px-3 py-2  shadow-sm border-bottom">
            <div class="d-flex align-items-center">
                <i class="fas fa-file-invoice text-success fs-4 me-2"></i>
                <h5 class="m-0 fw-bold text-dark">B√°o C√°o Giao D·ªãch</h5>
            </div>
            <select id="report-type-select" class="form-select form-select-sm fw-bold border-0 bg-light"
                style="max-width: 200px;">
                <option value="all">üìä T·∫•t c·∫£ giao d·ªãch</option>
                <option value="in">üì• Phi·∫øu Thu (IN)</option>
                <option value="out">üì§ Phi·∫øu Chi (OUT)</option>
                <option value="summary">üìà T·ªïng h·ª£p</option>
            </select>
        </div>

        <div class="px-3 py-2 bg-light">
            <div class="acc-filter-container" style="width: fit-content;">
                <div class="acc-filter-header  border rounded" onclick="this.parentElement.classList.toggle('active')"
                    style="pointer-events: auto;">
                    <div class="d-flex align-items-center px-2 py-2">
                        <i class="fas fa-filter text-success me-2"></i>
                        <span class="fw-bold text-dark me-1">B·ªô l·ªçc:</span>
                        <span id="report-filter-summary" class="text-success fw-bold small">Th√°ng n√†y</span>
                    </div>
                    <i class="fas fa-chevron-down text-muted transition-icon"></i>
                </div>

                <div class="acc-filter-body  border border-top-0 rounded-bottom p-3">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="acc-label">Giai ƒëo·∫°n</label>
                            <select id="report-filter-period" class="form-select form-select-sm">
                                <option value="today">H√¥m nay</option>
                                <option value="week">Tu·∫ßn n√†y</option>
                                <option value="month" selected>Th√°ng n√†y</option>
                                <option value="quarter">Qu√Ω n√†y</option>
                                <option value="year">NƒÉm nay</option>
                                <option value="all">T·∫•t c·∫£</option>
                                <option value="custom">T√πy ch·ªçn ng√†y...</option>
                            </select>
                        </div>
                        <div class="col-md-6" id="report-custom-date-row" style="display: none;">
                            <div class="row g-2">
                                <div class="col-6">
                                    <label class="acc-label-xs">T·ª´ ng√†y</label>
                                    <input type="date" id="report-filter-start" class="form-control form-control-sm">
                                </div>
                                <div class="col-6">
                                    <label class="acc-label-xs">ƒê·∫øn ng√†y</label>
                                    <input type="date" id="report-filter-end" class="form-control form-control-sm">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-3 mt-2">
                        <div class="col-md-6">
                            <label class="acc-label">T√¨m ki·∫øm</label>
                            <input type="text" id="report-filter-keyword" class="form-control form-control-sm"
                                placeholder="ID, Di·ªÖn gi·∫£i, Booking ID...">
                        </div>
                        <div class="col-md-6">
                            <label class="acc-label">L·ªçc theo Qu·ªπ</label>
                            <select id="report-filter-fund" class="form-select form-select-sm">
                                <option value="">T·∫•t c·∫£ qu·ªπ</option>
                            </select>
                        </div>
                    </div>

                    <div class="text-end mt-3">
                        <button class="btn btn-sm btn-success" id="btn-apply-report-filter">
                            <i class="fas fa-check me-1"></i> √Åp d·ª•ng
                        </button>
                        <button class="btn btn-sm btn-outline-secondary" id="btn-reset-report-filter">
                            <i class="fas fa-redo me-1"></i> L√†m m·ªõi
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="px-3 pb-5" style="max-height: 70vh; overflow-y: auto;">
            <table class="table table-striped table-hover align-middle mt-3 text-nowrap" id="report-transaction-table"
                style="font-size: 0.85rem;">
                <thead class="table-light sticky-top">
                    <tr>
                        <th width="80px"><i class="fas fa-barcode me-1"></i>ID GD</th>
                        <th width="60px" class="text-center">Lo·∫°i</th>
                        <th width="90px" class="text-center">Ng√†y Giao D·ªãch</th>
                        <th width="90px" class="text-center">Ng√†y T·∫°o</th>
                        <th class="text-end">S·ªë Ti·ªÅn</th>
                        <th style="min-width: 160px;">Di·ªÖn Gi·∫£i</th>
                        <th width="100px">H·∫°ng M·ª•c</th>
                        <th width="85px">Booking ID</th>
                        <th width="75px">Qu·ªπ</th>
                        <th width="90px">Tr·∫°ng Th√°i</th>
                        <th width="85px">Ng∆∞·ªùi T·∫°o</th>
                        <th width="50px"></th>
                    </tr>
                </thead>
                <tbody id="report-table-body">
                    <tr>
                        <td colspan="12" class="text-center text-muted py-4">
                            <i class="fas fa-spinner fa-spin me-2"></i> ƒêang t·∫£i d·ªØ li·ªáu...
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="px-3 py-2 bg-light border-top text-muted small text-center">
            T·ªïng: <span id="report-total-records" class="fw-bold text-dark">0</span> giao d·ªãch |
            Thu: <span id="report-total-in" class="fw-bold text-success">0</span> |
            Chi: <span id="report-total-out" class="fw-bold text-danger">0</span> |
            L·ªách: <span id="report-balance" class="fw-bold">0</span>
        </div>
    </div>
</template>